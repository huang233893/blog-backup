// ===================
// 🌗 主题变量定义（仅使用项）
// ===================

:root
  // ai_summary
  --liushen-title-font-color: #000000ff
  --liushen-maskbg: rgba(255, 255, 255, 0.85)
  --liushen-ai-bg: conic-gradient(from 1.5708rad at 50% 50%, #d6b300 0%, #42A2FF 54%, #d6b300 100%)

  // card 背景
  --liushen-card-secondbg: #f1f3f8

  // text
  --liushen-text: #3b3636ff
  --liushen-secondtext: #3b3636ff
  // 新增美化变量
  --liushen-shadow: rgba(0, 0, 0, 0.1)
  --liushen-hover: rgba(0, 0, 0, 0.03)

[data-theme='dark']
  // ai_summary
  --liushen-title-font-color: #ffffffff
  --liushen-maskbg: rgba(41, 37, 37, 0.85)
  --liushen-ai-bg: conic-gradient(from 1.5708rad at 50% 50%, rgba(214, 178, 0, 0.46) 0%, rgba(66, 161, 255, 0.53) 54%, rgba(214, 178, 0, 0.49) 100%)

  // card 背景
  --liushen-card-secondbg: #3e3f41

  // text
  --liushen-text: #ffffffb3
  --liushen-secondtext: #ffffffff
  // 新增美化变量
  --liushen-shadow: rgba(0, 0, 0, 0.3)
  --liushen-hover: rgba(255, 255, 255, 0.03)

// ===================
// 📘 AI 摘要模块样式
// ===================

if hexo-config('ai_summary.enable')
  .ai-summary
    background-color var(--liushen-maskbg)
    background var(--liushen-card-secondbg)
    border-radius 16px  // 更圆润的边角
    padding 12px 16px 16px  // 更舒适的内边距
    line-height 1.5  // 提升可读性
    flex-direction column
    margin-bottom 20px  // 增加底部间距
    display flex
    gap 8px  // 增大内部间距
    position relative
    // 新增阴影增强层次感
    box-shadow 0 4px 12px var(--liushen-shadow)
    // 平滑过渡效果
    transition all 0.3s ease

    // 修复背景模糊bug：调整模糊范围和位置
    &::before
      content ''
      position absolute
      top 0
      left 0
      width 100%
      height 100%
      z-index 1
      filter blur(12px)  // 优化模糊程度
      opacity .35  // 降低透明度避免过度模糊
      background-image var(--liushen-ai-bg)
      // 调整缩放让模糊范围更匹配容器
      transform scale(1.05)
      // 解决模糊边缘截断问题
      border-radius inherit
      clip-path inset(-10px)  // 扩展模糊范围

    &::after
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      border-radius: 16px;  // 同步边角弧度
      background: var(--liushen-maskbg);
      // 增加细微边框提升精致度
      border: 1px solid rgba(255, 255, 255, 0.08)

    .ai-explanation
      z-index 10
      padding 10px 14px  // 优化内边距
      font-size 15px
      line-height 1.6  // 提升阅读体验
      color var(--liushen-text)
      text-align justify
      // 增加背景对比
      background: rgba(255, 255, 255, 0.05)
      border-radius: 8px

      // ✅ 打字机光标动画
      &::after
        content ''
        display inline-block
        width 8px
        height 2px
        margin-left 2px
        background var(--liushen-text)
        vertical-align bottom
        animation blink-underline 1s ease-in-out infinite
        transition all .3s
        position relative
        bottom 3px

    .ai-title
      z-index 10
      font-size 16px  // 略微增大标题
      display flex
      border-radius 10px  // 优化边角
      align-items center
      position relative
      padding 8px 14px  // 增加标题内边距
      cursor default
      user-select none
      // 标题悬停效果
      transition all 0.2s ease
      &:hover
        background: var(--liushen-hover)

      .ai-title-left
        display flex
        align-items center
        color var(--liushen-title-font-color)

        i
          margin-right 5px  // 增加图标间距
          display flex
          color var(--liushen-title-font-color)
          border-radius 20px
          justify-content center
          align-items center
          // 图标轻微放大
          transform: scale(1.1)

        .ai-title-text
          font-weight 600  // 增强标题权重

      .ai-tag
        color var(--liushen-secondtext)
        font-weight 300
        margin-left auto
        display flex
        align-items center
        justify-content center
        transition .3s
        // 标签美化
        padding: 2px 8px
        border-radius: 12px
        background: rgba(0, 0, 0, 0.05)
        &:hover
          opacity: 0.8

  // ✅ 打字机光标闪烁动画
  @keyframes blink-underline
    0%, 100%
      opacity 1
    50%
      opacity 0