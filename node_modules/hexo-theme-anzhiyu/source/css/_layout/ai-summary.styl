// ===================
// 🌗 主题变量定义（默认黑色 + 兼容亮色）
// ===================

:root {
  /* 默认黑色模式变量 */
  --titlebar-bg: #1a1a1a; /* 标题栏背景（深黑） */
  --titlebar-border: rgba(255, 255, 255, 0.08); /* 标题栏边框（浅灰透明） */
  --content-bg: #222222; /* 内容区背景（深灰） */
  --title-text: #ffffff; /* 标题文字（纯白） */
  --content-text: #e0e0e0cc; /* 内容文字（浅灰半透） */
  --tag-bg: #ffcc002a; /* 标签背景（浅黄透明） */
  --tag-text: #ff7f00; /* 标签文字（暖黄） */
  --window-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); /* 窗口阴影（深色） */
}

/* 亮色模式变量（补充定义，解决显示问题） */
[data-theme='light'] {
  --titlebar-bg: #f5f5f7; /* 标题栏背景（浅灰，匹配Mac亮色） */
  --titlebar-border: rgba(0, 0, 0, 0.08); /* 标题栏边框（深灰透明） */
  --content-bg: #ffffff; /* 内容区背景（纯白） */
  --title-text: #1d1d1f; /* 标题文字（深灰） */
  --content-text: #3a3a3c; /* 内容文字（中灰） */
  --tag-bg: #4285f41a; /* 标签背景（浅蓝透明） */
  --tag-text: #ff7f00; 
  --window-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* 窗口阴影（浅色） */
}

/* 通用变量（两种模式共用） */
:root, [data-theme='light'] {
  --mac-red: #ff5f58;
  --mac-yellow: #ff7f00;
  --mac-green: #14c143;
  --mac-title-font: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
  --mac-title-height: 34px;
  --mac-control-size: 14px;
  --border-radius: 12px 12px 8px 8px; /* 统一窗口圆角 */
}


// ===================
// 📘 AI 摘要模块样式（兼容亮色模式）
// ===================

if hexo-config('ai_summary.enable') {
  .ai-summary {
    background: var(--content-bg); /* 内容区背景（关联主题变量） */
    border-radius: var(--border-radius);
    padding: 0;
    margin-bottom: 24px;
    display: flex;
    flex-direction: column;
    position: relative;
    box-shadow: var(--window-shadow); /* 阴影随主题变化 */
    overflow: hidden;

    // 标题栏样式（核心修复：关联主题变量）
    .mac-titlebar {
      height: var(--mac-title-height);
      width: 100%;
      background: var(--titlebar-bg); /* 标题栏背景随主题变化 */
      padding: 0 18px;
      display: flex;
      align-items: center;
      gap: 14px;
      cursor: default;
      z-index: 10;
      border-bottom: 1px solid var(--titlebar-border); /* 边框随主题变化 */
      backdrop-filter: blur(4px);
    }

    // 红绿灯按钮（两种模式下都清晰）
    .window-controls {
      display: flex;
      gap: 8px;
      margin-right: 4px;

      .control-btn {
        width: var(--mac-control-size);
        height: var(--mac-control-size);
        border-radius: 50%;
        transition: all 0.15s ease;
        position: relative;

        &::after {
          content: '';
          position: absolute;
          top: 1px;
          left: 1px;
          width: 4px;
          height: 4px;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.2);
        }

        &:hover {
          transform: scale(1.05);
          box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
        }

        &.close { background: var(--mac-red); }
        &.minimize { background: var(--mac-yellow); }
        &.maximize { background: var(--mac-green); }
      }
    }

    // 标题文本（随主题变色）
    .ai-title {
      padding: 0;
      flex: 1;
      height: 100%;
      display: flex;
      align-items: center;
      font-family: var(--mac-title-font);

      .ai-title-left {
        display: flex;
        align-items: center;
        color: var(--title-text); /* 标题文字色随主题变化 */

        i.fa-brands.fa-slack {
          margin-right: 8px;
          font-size: 16px;
          color: var(--title-text); /* 图标颜色随主题变化 */
          opacity: 0.85;
        }

        .ai-title-text {
          font-size: 15px;
          font-weight: 500;
          letter-spacing: 0.2px;
        }
      }

      // 标签样式（随主题变色）
      .ai-tag#ai-tag {
        color: var(--tag-text); /* 标签文字色随主题变化 */
        font-family: var(--mac-title-font);
        font-size: 12px;
        font-weight: 400;
        padding: 3px 10px;
        border-radius: 12px;
        background: var(--tag-bg); /* 标签背景随主题变化 */
        margin-left: auto;
        transition: all 0.2s ease;

        &:hover {
          transform: translateY(-1px);
          opacity: 0.9;
        }
      }
    }

    // 内容区样式（随主题变色）
    .ai-explanation {
      z-index: 10;
      padding: 16px 18px;
      font-size: 15px;
      line-height: 1.6;
      color: var(--content-text); /* 内容文字色随主题变化 */
      text-align: justify;
      font-family: var(--mac-title-font);
    }
  }

  // 打字机光标动画（随内容文字色变化）
  @keyframes blink-underline {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
  .ai-explanation::after {
    content: '';
    display: inline-block;
    width: 8px;
    height: 2px;
    margin-left: 2px;
    background: var(--content-text); /* 光标颜色随内容文字变化 */
    vertical-align: bottom;
    animation: blink-underline 1s ease-in-out infinite;
    position: relative;
    bottom: 3px;
  }
}